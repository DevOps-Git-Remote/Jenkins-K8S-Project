# Jenkins-K8S-Project

<mxGraphModel><root><mxCell id="0"/><mxCell id="1" parent="0"/><mxCell id="2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;strokeColor=#FF3333;" edge="1" source="3" target="5" parent="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="3" value="Jenkins Server&lt;div&gt;Admin User: root&lt;/div&gt;" style="whiteSpace=wrap;html=1;aspect=fixed;strokeColor=#FF3333;" vertex="1" parent="1"><mxGeometry x="50" y="100" width="110" height="110" as="geometry"/></mxCell><mxCell id="4" value="&lt;div&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=#FF3333;fillColor=none;" vertex="1" parent="1"><mxGeometry x="510" y="345" width="20" height="10" as="geometry"/></mxCell><mxCell id="5" value="&lt;div&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;&lt;b&gt;&lt;u&gt;Environment Variables:&lt;/u&gt;&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span data-teams=&quot;true&quot;&gt;workspacePath = '/var/lib/jenkins/jobs/K8S-Orchestration-For-Statefull-Spring-Application/workspace'&lt;/span&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;&lt;b&gt;Credentials&lt;/b&gt;: credentials: ['Jenkins_Tomcat_SSH_Credentials'])&lt;/span&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;text-wrap: nowrap;&quot;&gt;Jenkins_Tomcat_SSH_Credentials =&amp;gt; The private key of the Jenkins server is stored in Jenkins Credentials.&lt;/span&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;text-wrap: nowrap;&quot;&gt;&lt;b&gt;&lt;u&gt;Files&lt;/u&gt;&lt;/b&gt;:&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;text-wrap: nowrap;&quot;&gt;&lt;b&gt;Folder&lt;/b&gt;: .ssh/ ==&amp;gt; &lt;b&gt;Permissions&lt;/b&gt;: 700 ==&amp;gt; &lt;b&gt;Location&lt;/b&gt;: /var/lib/jenkins/.ssh/&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;text-wrap: nowrap;&quot;&gt;&lt;b&gt;Private Key File:&lt;/b&gt;&amp;nbsp;id_rsa ==&amp;gt; &lt;b&gt;Permissions&lt;/b&gt;:&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;600 ==&amp;gt; &lt;b&gt;Location&lt;/b&gt;: /var/lib/jenkins/.ssh/id_rsa&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;&lt;b&gt;Public Key File&lt;/b&gt;: id_rsa.pub ==&amp;gt; &lt;b&gt;Permissions&lt;/b&gt;: 644 ==&amp;gt; &lt;b&gt;Location&lt;/b&gt;: /var/lib/jenkins/.ssh/id_rsa.pub&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;&lt;b&gt;Authorized Key File&lt;/b&gt;: authorized_keys ==&amp;gt; &lt;b&gt;Permissions&lt;/b&gt;: 600 ==&amp;gt; &lt;b&gt;Location&lt;/b&gt;: /var/lib/jenkins/.ssh/authorized_keys&lt;/span&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#FF3333;" vertex="1" parent="1"><mxGeometry x="210" y="80" width="620" height="150" as="geometry"/></mxCell><mxCell id="6" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;strokeColor=#FF3333;" edge="1" source="7" target="8" parent="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="7" value="NFS Server&lt;div&gt;Admin User: root&lt;/div&gt;" style="whiteSpace=wrap;html=1;aspect=fixed;strokeColor=#FF3333;" vertex="1" parent="1"><mxGeometry x="50" y="277.5" width="110" height="110" as="geometry"/></mxCell><mxCell id="8" value="&lt;div&gt;&lt;b&gt;&lt;u&gt;Environment Variables:&lt;/u&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;span data-teams=&quot;true&quot;&gt;NFS_USER = 'root'&amp;nbsp;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; NFS_SERVER = '192.168.1.114'&amp;nbsp;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; NFS_PASSWORD = 'XXXXXXXX'&lt;/span&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;span data-teams=&quot;true&quot;&gt;&lt;span data-teams=&quot;true&quot;&gt;SSH_KEY_NFS = '/var/lib/jenkins/.ssh/id_rsa_NFS'&lt;/span&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span data-teams=&quot;true&quot;&gt;&lt;span data-teams=&quot;true&quot;&gt;EXPORT_DIR = '/customVolume'&lt;/span&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;text-wrap: nowrap;&quot;&gt;&lt;b&gt;&lt;u&gt;Files&lt;/u&gt;&lt;/b&gt;:&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;text-wrap: nowrap;&quot;&gt;&lt;b&gt;Folder&lt;/b&gt;: .ssh/ ==&amp;gt; &lt;b&gt;Permissions&lt;/b&gt;: 700 ==&amp;gt; &lt;b&gt;Location&lt;/b&gt;: ~/.ssh/&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;text-wrap: nowrap;&quot;&gt;&lt;b&gt;Private Key File:&lt;/b&gt;&amp;nbsp;id_rsa ==&amp;gt; &lt;b&gt;Permissions&lt;/b&gt;:&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;600 ==&amp;gt; &lt;b&gt;Location&lt;/b&gt;: ~/.ssh/id_rsa&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;&lt;b&gt;Public Key File&lt;/b&gt;: id_rsa.pub ==&amp;gt; &lt;b&gt;Permissions&lt;/b&gt;: 644 ==&amp;gt; &lt;b&gt;Location&lt;/b&gt;: ~/.ssh/id_rsa.pub&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;&lt;b&gt;Authorized Key File&lt;/b&gt;: authorized_keys ==&amp;gt; &lt;b&gt;Permissions&lt;/b&gt;: 600 ==&amp;gt; &lt;b&gt;Location&lt;/b&gt;: ~/.ssh/authorized_keys&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;Edit file&lt;/b&gt;:&amp;nbsp;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;/etc/exports ==&amp;gt;&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;${EXPORT_DIR} *(rw,sync,no_subtree_check,no_root_squash)&lt;/span&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#FF3333;" vertex="1" parent="1"><mxGeometry x="210" y="245" width="620" height="175" as="geometry"/></mxCell><mxCell id="9" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#FF3333;" edge="1" source="10" target="11" parent="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="10" value="K8S Master Server&lt;div&gt;Admin User: root&lt;/div&gt;" style="whiteSpace=wrap;html=1;aspect=fixed;strokeColor=#FF3333;" vertex="1" parent="1"><mxGeometry x="50" y="490" width="110" height="110" as="geometry"/></mxCell><mxCell id="11" value="&lt;div&gt;&lt;b&gt;&lt;u&gt;Environment Variables:&lt;/u&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;span data-teams=&quot;true&quot;&gt;K8S_SERVER = &quot;192.168.1.100&quot;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; K8S_ROOT_USER = &quot;root&quot;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; VAGRANT_USER = &quot;vagrant&quot;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; K8S_USER = 'vagrant'&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; K8S_PASSWORD = 'XXXXXX'&lt;/span&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span data-teams=&quot;true&quot;&gt;&lt;span data-teams=&quot;true&quot;&gt;SSH_KEY_K8S = '/var/lib/jenkins/.ssh/id_rsa_K8S'&lt;/span&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;text-wrap: nowrap;&quot;&gt;&lt;b&gt;&lt;u&gt;Files&lt;/u&gt;&lt;/b&gt;:&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;text-wrap: nowrap;&quot;&gt;&lt;b&gt;Folder&lt;/b&gt;: .ssh/ ==&amp;gt; &lt;b&gt;Permissions&lt;/b&gt;: 700 ==&amp;gt; &lt;b&gt;Location&lt;/b&gt;: ~/.ssh/&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;text-wrap: nowrap;&quot;&gt;&lt;b&gt;Private Key File:&lt;/b&gt;&amp;nbsp;id_rsa ==&amp;gt; &lt;b&gt;Permissions&lt;/b&gt;:&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;600 ==&amp;gt; &lt;b&gt;Location&lt;/b&gt;: ~/.ssh/id_rsa&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;&lt;b&gt;Public Key File&lt;/b&gt;: id_rsa.pub ==&amp;gt; &lt;b&gt;Permissions&lt;/b&gt;: 644 ==&amp;gt; &lt;b&gt;Location&lt;/b&gt;: ~/.ssh/id_rsa.pub&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;&lt;b&gt;Authorized Key File&lt;/b&gt;: authorized_keys ==&amp;gt; &lt;b&gt;Permissions&lt;/b&gt;: 600 ==&amp;gt; &lt;b&gt;Location&lt;/b&gt;: ~/.ssh/authorized_keys&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;Edit file&lt;/b&gt;:&amp;nbsp;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;/etc/exports ==&amp;gt;&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;${EXPORT_DIR} *(rw,sync,no_subtree_check,no_root_squash)&lt;/span&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#FF3333;" vertex="1" parent="1"><mxGeometry x="210" y="450" width="620" height="190" as="geometry"/></mxCell><mxCell id="12" value="" style="rounded=0;whiteSpace=wrap;html=1;strokeColor=#FF3333;" vertex="1" parent="1"><mxGeometry x="160" y="700" width="610" height="130" as="geometry"/></mxCell><mxCell id="13" value="K8S Slave-1 Server&lt;div&gt;Admin User: root&lt;/div&gt;" style="whiteSpace=wrap;html=1;aspect=fixed;strokeColor=#FF3333;" vertex="1" parent="1"><mxGeometry x="210" y="710" width="110" height="110" as="geometry"/></mxCell><mxCell id="14" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#FF3333;" edge="1" source="17" target="13" parent="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="15" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#FF3333;" edge="1" source="17" target="18" parent="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="16" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#FF3333;" edge="1" source="17" target="10" parent="1"><mxGeometry relative="1" as="geometry"><Array as="points"><mxPoint x="465" y="660"/><mxPoint x="105" y="660"/></Array></mxGeometry></mxCell><mxCell id="17" value="K8S Master Server&lt;div&gt;Admin User: root&lt;/div&gt;" style="whiteSpace=wrap;html=1;aspect=fixed;strokeColor=#FF3333;" vertex="1" parent="1"><mxGeometry x="410" y="710" width="110" height="110" as="geometry"/></mxCell><mxCell id="18" value="K8S Slave-2 Server&lt;div&gt;Admin User: root&lt;/div&gt;" style="whiteSpace=wrap;html=1;aspect=fixed;strokeColor=#FF3333;" vertex="1" parent="1"><mxGeometry x="610" y="710" width="110" height="110" as="geometry"/></mxCell><mxCell id="19" value="&lt;b&gt;&lt;u&gt;K8S Cluster&lt;/u&gt;&lt;/b&gt;" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#FF3333;" vertex="1" parent="1"><mxGeometry x="160" y="670" width="130" height="30" as="geometry"/></mxCell><mxCell id="20" value="Stages:" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#FF3333;" vertex="1" parent="1"><mxGeometry x="50" y="1060" width="120" height="30" as="geometry"/></mxCell><mxCell id="21" value="Stage 1:&amp;nbsp;&lt;strong style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;Check Out Code&lt;/strong&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;:&lt;/span&gt;&lt;ul&gt;&lt;li&gt;This stage checks out the code from a Git repository on GitHub using the &lt;code&gt;git&lt;/code&gt; command. The branch is &lt;code&gt;main&lt;/code&gt;, and the Jenkins credentials &lt;code&gt;35a7a714-998b-4bda-b517-ac5be548d599&lt;/code&gt; are used for authentication.&lt;/li&gt;&lt;li&gt;Credentials ==&amp;gt;&amp;nbsp;&lt;span style=&quot;font-family: monospace;&quot;&gt;35a7a714-998b-4bda-b517-ac5be548d599 ==&amp;gt; Contains a token of GitHub Account&lt;/span&gt;&lt;/li&gt;&lt;/ul&gt;" style="rounded=0;whiteSpace=wrap;html=1;align=left;strokeColor=#FF3333;" vertex="1" parent="1"><mxGeometry x="105" y="1100" width="720" height="100" as="geometry"/></mxCell><mxCell id="22" value="&lt;h3&gt;Environment Variables:&lt;/h3&gt;&lt;ul&gt;&lt;li&gt;&lt;strong&gt;NFS_USER, NFS_SERVER, NFS_PASSWORD&lt;/strong&gt;: Used for authenticating and connecting to the NFS server.&lt;/li&gt;&lt;li&gt;&lt;strong&gt;K8S_SERVER, K8S_USER, K8S_PASSWORD&lt;/strong&gt;: Used for authenticating and connecting to the Kubernetes master server.&lt;/li&gt;&lt;li&gt;&lt;strong&gt;VAGRANT_USER, K8S_ROOT_USER&lt;/strong&gt;: Authentication for different user roles on the Kubernetes server.&lt;/li&gt;&lt;li&gt;&lt;strong&gt;EXPORT_DIR&lt;/strong&gt;: The directory on the NFS server to be shared as a persistent volume.&lt;/li&gt;&lt;li&gt;&lt;strong&gt;SSH_KEY_NFS, SSH_KEY_K8S&lt;/strong&gt;: Paths to private keys for secure SSH access to the servers.&lt;/li&gt;&lt;li&gt;&lt;strong&gt;workspacePath&lt;/strong&gt;: Path to the Jenkins workspace where the application files are stored.&lt;/li&gt;&lt;/ul&gt;" style="rounded=0;whiteSpace=wrap;html=1;align=left;strokeColor=#FF3333;" vertex="1" parent="1"><mxGeometry x="50" y="870" width="690" height="150" as="geometry"/></mxCell><mxCell id="23" value="Stage 2:&amp;nbsp;&lt;strong style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;Getting Jenkins Public Key to Update in NFS Server&lt;/strong&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;:&lt;/span&gt;&lt;ul&gt;&lt;li&gt;This stage ensures that Jenkins can copy its public key to the NFS server (&lt;code&gt;192.168.1.114&lt;/code&gt;). The public key is placed on the NFS server to allow Jenkins to authenticate and communicate securely via SSH.&lt;/li&gt;&lt;/ul&gt;" style="rounded=0;whiteSpace=wrap;html=1;align=left;strokeColor=#FF3333;" vertex="1" parent="1"><mxGeometry x="105" y="1210" width="720" height="100" as="geometry"/></mxCell><mxCell id="24" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.25;exitDx=0;exitDy=0;entryX=0;entryY=0.25;entryDx=0;entryDy=0;strokeColor=#FF3333;" edge="1" source="28" target="33" parent="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="25" value="Authentication Request&lt;div&gt;&lt;span data-teams=&quot;true&quot;&gt;['Jenkins_Tomcat_SSH_Credentials']&lt;/span&gt;&lt;/div&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];strokeColor=#FF3333;" vertex="1" connectable="0" parent="24"><mxGeometry x="-0.0725" y="-2" relative="1" as="geometry"><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="26" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.75;exitDx=0;exitDy=0;entryX=0;entryY=0.75;entryDx=0;entryDy=0;strokeColor=#FF3333;" edge="1" source="28" target="33" parent="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="27" value="COPY File:&lt;div&gt;/var/lib/jenkins/.ssh/id_rsa.pub&lt;/div&gt;&lt;div&gt;TO: ~/jenkins_key.pub&lt;/div&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];strokeColor=#FF3333;" vertex="1" connectable="0" parent="26"><mxGeometry x="-0.0203" y="-2" relative="1" as="geometry"><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="28" value="Jenkins Server" style="whiteSpace=wrap;html=1;aspect=fixed;strokeColor=#FF3333;" vertex="1" parent="1"><mxGeometry x="20" y="1340" width="110" height="110" as="geometry"/></mxCell><mxCell id="29" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;strokeColor=#FF3333;" edge="1" source="33" target="28" parent="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="30" value="Connection Established" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];strokeColor=#FF3333;" vertex="1" connectable="0" parent="29"><mxGeometry x="0.0029" relative="1" as="geometry"><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="31" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=1;exitDx=0;exitDy=0;entryX=1;entryY=1;entryDx=0;entryDy=0;strokeColor=#FF3333;" edge="1" source="33" target="28" parent="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="32" value="Success" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];strokeColor=#FF3333;" vertex="1" connectable="0" parent="31"><mxGeometry x="-0.0321" relative="1" as="geometry"><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="33" value="NFS Server" style="whiteSpace=wrap;html=1;aspect=fixed;strokeColor=#FF3333;" vertex="1" parent="1"><mxGeometry x="360" y="1340" width="110" height="110" as="geometry"/></mxCell><mxCell id="34" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#FF3333;" edge="1" source="35" target="33" parent="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="35" value="Connection Only established when the&amp;nbsp;&lt;br&gt;&lt;div&gt;sudo vi /etc/ssh/sshd_config&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;PermitRootLogin yes&lt;br&gt;PubkeyAuthentication yes&lt;br&gt;&lt;/div&gt;&lt;div&gt;AuthorizedKeysFile&amp;nbsp; &amp;nbsp; &amp;nbsp; .ssh/authorized_keys&lt;br&gt;&lt;/div&gt;&lt;div&gt;PasswordAuthentication yes&lt;br&gt;&lt;/div&gt;&lt;div&gt;KbdInteractiveAuthentication no&lt;br&gt;&lt;/div&gt;&lt;div&gt;UsePAM yes&lt;br&gt;&lt;/div&gt;&lt;div&gt;X11Forwarding yes&lt;br&gt;&lt;/div&gt;&lt;div&gt;PrintMotd no&lt;br&gt;&lt;/div&gt;&lt;div&gt;AcceptEnv LANG LC_*&lt;br&gt;&lt;/div&gt;&lt;div&gt;Subsystem&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;sftp&amp;nbsp; &amp;nbsp; /usr/lib/openssh/sftp-server&lt;br&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#FF3333;" vertex="1" parent="1"><mxGeometry x="850" y="1310" width="340" height="170" as="geometry"/></mxCell><mxCell id="36" value="Stage 3:&amp;nbsp;&lt;strong style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;Getting Jenkins Public Key to Update in K8S Master Machine&lt;/strong&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;:&lt;/span&gt;&lt;ul&gt;&lt;li&gt;Similar to the previous stage, but this time the Jenkins public key is copied to the Kubernetes master server (&lt;code&gt;192.168.1.100&lt;/code&gt;) for SSH authentication.&lt;/li&gt;&lt;/ul&gt;" style="rounded=0;whiteSpace=wrap;html=1;align=left;strokeColor=#FF3333;" vertex="1" parent="1"><mxGeometry x="105" y="1490" width="720" height="100" as="geometry"/></mxCell><mxCell id="37" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.25;exitDx=0;exitDy=0;entryX=0;entryY=0.25;entryDx=0;entryDy=0;strokeColor=#FF3333;" edge="1" source="41" target="46" parent="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="38" value="Authentication Request&lt;div&gt;&lt;span data-teams=&quot;true&quot;&gt;['Jenkins_Tomcat_SSH_Credentials']&lt;/span&gt;&lt;/div&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];strokeColor=#FF3333;" vertex="1" connectable="0" parent="37"><mxGeometry x="-0.0725" y="-2" relative="1" as="geometry"><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="39" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.75;exitDx=0;exitDy=0;entryX=0;entryY=0.75;entryDx=0;entryDy=0;strokeColor=#FF3333;" edge="1" source="41" target="46" parent="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="40" value="COPY File:&lt;div&gt;/var/lib/jenkins/.ssh/id_rsa.pub&lt;/div&gt;&lt;div&gt;TO: ~/jenkins_key.pub&lt;/div&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];strokeColor=#FF3333;" vertex="1" connectable="0" parent="39"><mxGeometry x="-0.0203" y="-2" relative="1" as="geometry"><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="41" value="Jenkins Server" style="whiteSpace=wrap;html=1;aspect=fixed;strokeColor=#FF3333;" vertex="1" parent="1"><mxGeometry x="20" y="1610" width="110" height="110" as="geometry"/></mxCell><mxCell id="42" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;strokeColor=#FF3333;" edge="1" source="46" target="41" parent="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="43" value="Connection Established" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];strokeColor=#FF3333;" vertex="1" connectable="0" parent="42"><mxGeometry x="0.0029" relative="1" as="geometry"><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="44" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=1;exitDx=0;exitDy=0;entryX=1;entryY=1;entryDx=0;entryDy=0;strokeColor=#FF3333;" edge="1" source="46" target="41" parent="1"><mxGeometry relative="1" as="geometry"><Array as="points"><mxPoint x="240" y="1720"/><mxPoint x="240" y="1720"/></Array></mxGeometry></mxCell><mxCell id="45" value="Success" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];strokeColor=#FF3333;" vertex="1" connectable="0" parent="44"><mxGeometry x="0.0406" relative="1" as="geometry"><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="46" value="K8S Master Server" style="whiteSpace=wrap;html=1;aspect=fixed;strokeColor=#FF3333;" vertex="1" parent="1"><mxGeometry x="360" y="1610" width="110" height="110" as="geometry"/></mxCell><mxCell id="47" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#FF3333;" edge="1" source="48" target="46" parent="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="48" value="Connection Only established when the&amp;nbsp;&lt;br&gt;&lt;div&gt;sudo vi /etc/ssh/sshd_config&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;PermitRootLogin yes&lt;br&gt;PubkeyAuthentication yes&lt;br&gt;&lt;/div&gt;&lt;div&gt;AuthorizedKeysFile&amp;nbsp; &amp;nbsp; &amp;nbsp; .ssh/authorized_keys&lt;br&gt;&lt;/div&gt;&lt;div&gt;PasswordAuthentication yes&lt;br&gt;&lt;/div&gt;&lt;div&gt;KbdInteractiveAuthentication no&lt;br&gt;&lt;/div&gt;&lt;div&gt;UsePAM yes&lt;br&gt;&lt;/div&gt;&lt;div&gt;X11Forwarding yes&lt;br&gt;&lt;/div&gt;&lt;div&gt;PrintMotd no&lt;br&gt;&lt;/div&gt;&lt;div&gt;AcceptEnv LANG LC_*&lt;br&gt;&lt;/div&gt;&lt;div&gt;Subsystem&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;sftp&amp;nbsp; &amp;nbsp; /usr/lib/openssh/sftp-server&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#FF3333;" vertex="1" parent="1"><mxGeometry x="850" y="1580" width="340" height="170" as="geometry"/></mxCell><mxCell id="49" value="Stage 4:&amp;nbsp;&lt;strong style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;Generating SSH Keys and Configuring Jenkins Public Key in NFS Server for Persistent Volume&lt;/strong&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;:&lt;/span&gt;&lt;ul&gt;&lt;li&gt;This stage generates a new SSH key pair on the NFS server and configures it with the Jenkins public key (&lt;code&gt;jenkins_key.pub&lt;/code&gt;) to allow Jenkins access for persistent volume operations.&lt;/li&gt;&lt;/ul&gt;" style="rounded=0;whiteSpace=wrap;html=1;align=left;strokeColor=#FF3333;" vertex="1" parent="1"><mxGeometry x="105" y="1740" width="720" height="100" as="geometry"/></mxCell><mxCell id="50" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.25;exitDx=0;exitDy=0;entryX=0;entryY=0.25;entryDx=0;entryDy=0;strokeColor=#FF3333;" edge="1" target="58" parent="1"><mxGeometry relative="1" as="geometry"><mxPoint x="135" y="1880" as="sourcePoint"/></mxGeometry></mxCell><mxCell id="51" value="Authentication Request&lt;div&gt;&lt;span data-teams=&quot;true&quot;&gt;['Jenkins_Tomcat_SSH_Credentials']&lt;/span&gt;&lt;/div&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];strokeColor=#FF3333;" vertex="1" connectable="0" parent="50"><mxGeometry x="-0.0725" y="-2" relative="1" as="geometry"><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="52" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.75;exitDx=0;exitDy=0;entryX=0;entryY=0.75;entryDx=0;entryDy=0;strokeColor=#FF3333;" edge="1" target="58" parent="1"><mxGeometry relative="1" as="geometry"><mxPoint x="135" y="1940" as="sourcePoint"/></mxGeometry></mxCell><mxCell id="53" value="Request to establish SCRIPT" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];strokeColor=#FF3333;" vertex="1" connectable="0" parent="52"><mxGeometry x="-0.0203" y="-2" relative="1" as="geometry"><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="54" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;strokeColor=#FF3333;" edge="1" source="58" parent="1"><mxGeometry relative="1" as="geometry"><mxPoint x="135" y="1910" as="targetPoint"/></mxGeometry></mxCell><mxCell id="55" value="Connection Established" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];strokeColor=#FF3333;" vertex="1" connectable="0" parent="54"><mxGeometry x="0.0029" relative="1" as="geometry"><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="56" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=1;exitDx=0;exitDy=0;entryX=1;entryY=1;entryDx=0;entryDy=0;strokeColor=#FF3333;" edge="1" source="58" parent="1"><mxGeometry relative="1" as="geometry"><Array as="points"><mxPoint x="210" y="1970"/><mxPoint x="210" y="1970"/></Array><mxPoint x="135" y="1970" as="targetPoint"/></mxGeometry></mxCell><mxCell id="57" value="Success" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];strokeColor=#FF3333;" vertex="1" connectable="0" parent="56"><mxGeometry x="0.0151" y="-1" relative="1" as="geometry"><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="58" value="NFS Server" style="whiteSpace=wrap;html=1;aspect=fixed;strokeColor=#FF3333;" vertex="1" parent="1"><mxGeometry x="365" y="1850" width="120" height="120" as="geometry"/></mxCell><mxCell id="59" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#FF3333;" edge="1" source="60" target="58" parent="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="60" value="&lt;div style=&quot;text-align: left;&quot;&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;mkdir -p ~/.ssh &amp;amp;&amp;amp; \&lt;/span&gt;&lt;/div&gt;&lt;span data-teams=&quot;true&quot;&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;&amp;nbsp;chmod 700 ~/.ssh &amp;amp;&amp;amp; \&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;&amp;nbsp;[ -f ~/.ssh/id_rsa ] &amp;amp;&amp;amp; rm ~/.ssh/id_rsa &amp;amp;&amp;amp; \&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;&amp;nbsp;ssh-keygen -t rsa -b 4096 -f ~/.ssh/id_rsa -N &quot;&quot; &amp;amp;&amp;amp; \&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;cat ~/jenkins_key.pub &amp;gt; ~/.ssh/authorized_keys &amp;amp;&amp;amp; \&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;cat ~/jenkins_key.pub &amp;gt; ~/.ssh/id_rsa.pub &amp;amp;&amp;amp; \&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;chmod 700 ~/.ssh &amp;amp;&amp;amp; \&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;chmod 600 ~/.ssh/*&lt;/span&gt;&lt;/div&gt;&lt;/span&gt;" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#FF3333;" vertex="1" parent="1"><mxGeometry x="580" y="1845" width="290" height="130" as="geometry"/></mxCell><mxCell id="61" value="Stage 5:&amp;nbsp;&lt;strong style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;Generating SSH Keys and Configuring Jenkins Public Key in K8S Master Server for Deploying StatefulSet Application&lt;/strong&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;:&lt;/span&gt;&lt;ul&gt;&lt;li&gt;Similar to the previous stage, but the SSH key pair is generated and configured on the Kubernetes master server to enable deployment from Jenkins.&lt;/li&gt;&lt;/ul&gt;" style="rounded=0;whiteSpace=wrap;html=1;align=left;strokeColor=#FF3333;" vertex="1" parent="1"><mxGeometry x="105" y="1990" width="720" height="100" as="geometry"/></mxCell><mxCell id="62" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.25;exitDx=0;exitDy=0;entryX=0;entryY=0.25;entryDx=0;entryDy=0;strokeColor=#FF3333;" edge="1" target="70" parent="1"><mxGeometry relative="1" as="geometry"><mxPoint x="135" y="2135" as="sourcePoint"/></mxGeometry></mxCell><mxCell id="63" value="Authentication Request&lt;div&gt;&lt;span data-teams=&quot;true&quot;&gt;['Jenkins_Tomcat_SSH_Credentials']&lt;/span&gt;&lt;/div&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];strokeColor=#FF3333;" vertex="1" connectable="0" parent="62"><mxGeometry x="-0.0725" y="-2" relative="1" as="geometry"><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="64" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.75;exitDx=0;exitDy=0;entryX=0;entryY=0.75;entryDx=0;entryDy=0;strokeColor=#FF3333;" edge="1" target="70" parent="1"><mxGeometry relative="1" as="geometry"><mxPoint x="135" y="2195" as="sourcePoint"/></mxGeometry></mxCell><mxCell id="65" value="Request to establish SCRIPT" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];strokeColor=#FF3333;" vertex="1" connectable="0" parent="64"><mxGeometry x="-0.0203" y="-2" relative="1" as="geometry"><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="66" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;strokeColor=#FF3333;" edge="1" source="70" parent="1"><mxGeometry relative="1" as="geometry"><mxPoint x="135" y="2165" as="targetPoint"/></mxGeometry></mxCell><mxCell id="67" value="Connection Established" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];strokeColor=#FF3333;" vertex="1" connectable="0" parent="66"><mxGeometry x="0.0029" relative="1" as="geometry"><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="68" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=1;exitDx=0;exitDy=0;entryX=1;entryY=1;entryDx=0;entryDy=0;strokeColor=#FF3333;" edge="1" source="70" parent="1"><mxGeometry relative="1" as="geometry"><Array as="points"><mxPoint x="210" y="2225"/><mxPoint x="210" y="2225"/></Array><mxPoint x="135" y="2225" as="targetPoint"/></mxGeometry></mxCell><mxCell id="69" value="Success" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];strokeColor=#FF3333;" vertex="1" connectable="0" parent="68"><mxGeometry x="0.0151" y="-1" relative="1" as="geometry"><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="70" value="K8S Master Server&lt;div&gt;user: vagrant&lt;/div&gt;" style="whiteSpace=wrap;html=1;aspect=fixed;strokeColor=#FF3333;" vertex="1" parent="1"><mxGeometry x="365" y="2105" width="120" height="120" as="geometry"/></mxCell><mxCell id="71" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#FF3333;" edge="1" source="72" target="70" parent="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="72" value="&lt;div style=&quot;text-align: left;&quot;&gt;mkdir -p ~/.ssh &amp;amp;&amp;amp; \&lt;br&gt;chmod 700 ~/.ssh &amp;amp;&amp;amp; \&lt;br&gt;[ -f ~/.ssh/id_rsa ] &amp;amp;&amp;amp; rm ~/.ssh/id_rsa &amp;amp;&amp;amp; \&lt;br&gt;ssh-keygen -t rsa -b 4096 -f ~/.ssh/id_rsa -N &quot;&quot; &amp;amp;&amp;amp; \&lt;br&gt;cat ~/jenkins_key.pub &amp;gt; ~/.ssh/authorized_keys &amp;amp;&amp;amp; \&lt;br&gt;cat ~/jenkins_key.pub &amp;gt; ~/.ssh/id_rsa.pub &amp;amp;&amp;amp; \&lt;br&gt;chmod 600 ~/.ssh/authorized_keys &amp;amp;&amp;amp; \&lt;br&gt;chmod 600 ~/.ssh/id_rsa.pub &amp;amp;&amp;amp; \&lt;br&gt;chmod 700 ~/.ssh&lt;br&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#FF3333;" vertex="1" parent="1"><mxGeometry x="580" y="2100" width="290" height="130" as="geometry"/></mxCell><mxCell id="73" value="Stage 6:&amp;nbsp;&lt;strong style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;Transfer SSH Key from K8S Root User to K8S Vagrant User&lt;/strong&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;:&lt;/span&gt;&lt;ul&gt;&lt;li&gt;This step transfers the SSH key from the root user to the &lt;code&gt;vagrant&lt;/code&gt; user on the Kubernetes server. This ensures that the &lt;code&gt;vagrant&lt;/code&gt; user can access the server using SSH.&lt;/li&gt;&lt;/ul&gt;" style="rounded=0;whiteSpace=wrap;html=1;align=left;strokeColor=#FF3333;" vertex="1" parent="1"><mxGeometry x="105" y="2250" width="720" height="100" as="geometry"/></mxCell><mxCell id="74" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.25;exitDx=0;exitDy=0;entryX=0;entryY=0.25;entryDx=0;entryDy=0;strokeColor=#FF3333;" edge="1" target="84" parent="1"><mxGeometry relative="1" as="geometry"><mxPoint x="135" y="2395" as="sourcePoint"/></mxGeometry></mxCell><mxCell id="75" value="Authentication Request&lt;div&gt;&lt;span data-teams=&quot;true&quot;&gt;['Jenkins_Tomcat_SSH_Credentials']&lt;/span&gt;&lt;br&gt;&lt;/div&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];strokeColor=#FF3333;" vertex="1" connectable="0" parent="74"><mxGeometry x="-0.0725" y="-2" relative="1" as="geometry"><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="76" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.75;exitDx=0;exitDy=0;entryX=0;entryY=0.75;entryDx=0;entryDy=0;strokeColor=#FF3333;" edge="1" target="84" parent="1"><mxGeometry relative="1" as="geometry"><mxPoint x="135" y="2455" as="sourcePoint"/></mxGeometry></mxCell><mxCell id="77" value="Request to establish SCRIPT" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];strokeColor=#FF3333;" vertex="1" connectable="0" parent="76"><mxGeometry x="-0.0203" y="-2" relative="1" as="geometry"><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="78" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;strokeColor=#FF3333;" edge="1" source="84" parent="1"><mxGeometry relative="1" as="geometry"><mxPoint x="135" y="2425" as="targetPoint"/></mxGeometry></mxCell><mxCell id="79" value="Connection Established" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];strokeColor=#FF3333;" vertex="1" connectable="0" parent="78"><mxGeometry x="0.0029" relative="1" as="geometry"><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="80" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=1;exitDx=0;exitDy=0;entryX=1;entryY=1;entryDx=0;entryDy=0;strokeColor=#FF3333;" edge="1" source="84" parent="1"><mxGeometry relative="1" as="geometry"><Array as="points"><mxPoint x="210" y="2485"/><mxPoint x="210" y="2485"/></Array><mxPoint x="135" y="2485" as="targetPoint"/></mxGeometry></mxCell><mxCell id="81" value="Success" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];strokeColor=#FF3333;" vertex="1" connectable="0" parent="80"><mxGeometry x="0.0151" y="-1" relative="1" as="geometry"><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="82" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;strokeColor=#FF3333;" edge="1" source="84" target="88" parent="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="83" value="shares files to /home/vagrant/.ssh" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];strokeColor=#FF3333;" vertex="1" connectable="0" parent="82"><mxGeometry x="0.101" relative="1" as="geometry"><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="84" value="K8S Master Server&lt;div&gt;User: root&lt;/div&gt;" style="whiteSpace=wrap;html=1;aspect=fixed;strokeColor=#FF3333;" vertex="1" parent="1"><mxGeometry x="360" y="2365" width="120" height="120" as="geometry"/></mxCell><mxCell id="85" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#FF3333;" edge="1" source="86" target="84" parent="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="86" value="&lt;div style=&quot;text-align: left;&quot;&gt;&lt;p&gt;ssh -o StrictHostKeyChecking=no root@192.168.1.100 &quot;mkdir -p /home/vagrant/.ssh&quot;&lt;br&gt;ssh -o StrictHostKeyChecking=no root@192.168.1.100 &quot;cp /root/.ssh/id_rsa* /home/vagrant/.ssh/&quot;&lt;/p&gt;&lt;p&gt;ssh -o StrictHostKeyChecking=no root@192.168.1.100 &quot;cat /home/vagrant/.ssh/id_rsa.pub &amp;gt;&amp;gt; /home/vagrant/.ssh/authorized_keys&quot;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;ssh -o StrictHostKeyChecking=no root@192.168.1.100 &quot;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;chmod 700 /home/vagrant/.ssh &amp;amp;&amp;amp;&lt;br&gt;chmod 600 /home/vagrant/.ssh/id_rsa &amp;amp;&amp;amp;&lt;br&gt;chmod 644 /home/vagrant/.ssh/id_rsa.pub &amp;amp;&amp;amp;&lt;br&gt;chmod 600 /home/vagrant/.ssh/authorized_keys &amp;amp;&amp;amp;&lt;br&gt;chown -R vagrant:vagrant /home/vagrant/.ssh&quot;&lt;/p&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#FF3333;" vertex="1" parent="1"><mxGeometry x="580" y="2360" width="540" height="210" as="geometry"/></mxCell><mxCell id="87" value="Stage 7:&amp;nbsp;&lt;strong style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;Test SSH Access as Vagrant User&lt;/strong&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;:&lt;/span&gt;&lt;ul&gt;&lt;li&gt;This stage tests whether SSH access as the &lt;code&gt;vagrant&lt;/code&gt; user to the Kubernetes master server (&lt;code&gt;192.168.1.100&lt;/code&gt;) is successful by printing &quot;SSH Access Successful&quot;.&lt;/li&gt;&lt;/ul&gt;" style="rounded=0;whiteSpace=wrap;html=1;align=left;strokeColor=#FF3333;" vertex="1" parent="1"><mxGeometry x="105" y="2590" width="720" height="100" as="geometry"/></mxCell><mxCell id="88" value="K8S Master Server&lt;div&gt;User: vagrant&lt;/div&gt;" style="whiteSpace=wrap;html=1;aspect=fixed;strokeColor=#FF3333;" vertex="1" parent="1"><mxGeometry x="120" y="2500" width="80" height="80" as="geometry"/></mxCell><mxCell id="89" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.25;exitDx=0;exitDy=0;entryX=0;entryY=0.25;entryDx=0;entryDy=0;strokeColor=#FF3333;" edge="1" source="93" target="98" parent="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="90" value="Authentication Request&lt;div&gt;&lt;span data-teams=&quot;true&quot;&gt;['Jenkins_Tomcat_SSH_Credentials']&lt;/span&gt;&lt;/div&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];strokeColor=#FF3333;" vertex="1" connectable="0" parent="89"><mxGeometry x="-0.0725" y="-2" relative="1" as="geometry"><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="91" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.75;exitDx=0;exitDy=0;entryX=0;entryY=0.75;entryDx=0;entryDy=0;strokeColor=#FF3333;" edge="1" source="93" target="98" parent="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="92" value="Request to establish SCRIPT" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];strokeColor=#FF3333;" vertex="1" connectable="0" parent="91"><mxGeometry x="-0.0203" y="-2" relative="1" as="geometry"><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="93" value="Jenkins Server" style="whiteSpace=wrap;html=1;aspect=fixed;strokeColor=#FF3333;" vertex="1" parent="1"><mxGeometry x="20" y="2705" width="120" height="120" as="geometry"/></mxCell><mxCell id="94" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;strokeColor=#FF3333;" edge="1" source="98" target="93" parent="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="95" value="Connection Established" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];strokeColor=#FF3333;" vertex="1" connectable="0" parent="94"><mxGeometry x="0.0029" relative="1" as="geometry"><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="96" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=1;exitDx=0;exitDy=0;entryX=1;entryY=1;entryDx=0;entryDy=0;strokeColor=#FF3333;" edge="1" source="98" target="93" parent="1"><mxGeometry relative="1" as="geometry"><Array as="points"><mxPoint x="215" y="2825"/><mxPoint x="215" y="2825"/></Array></mxGeometry></mxCell><mxCell id="97" value="Success" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];strokeColor=#FF3333;" vertex="1" connectable="0" parent="96"><mxGeometry x="0.0151" y="-1" relative="1" as="geometry"><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="98" value="K8S Master Server&lt;div&gt;User: vagrant&lt;/div&gt;" style="whiteSpace=wrap;html=1;aspect=fixed;strokeColor=#FF3333;" vertex="1" parent="1"><mxGeometry x="370" y="2705" width="120" height="120" as="geometry"/></mxCell><mxCell id="99" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#FF3333;" edge="1" source="100" target="98" parent="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="100" value="&lt;div style=&quot;text-align: left;&quot;&gt;&lt;span data-teams=&quot;true&quot;&gt;ssh -o StrictHostKeyChecking=no -i /var/lib/jenkins/.ssh/id_rsa_K8S ${VAGRANT_USER}@${K8S_SERVER} 'echo SSH Access Successful'&lt;/span&gt;&lt;br&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#FF3333;" vertex="1" parent="1"><mxGeometry x="580" y="2730" width="290" height="70" as="geometry"/></mxCell><mxCell id="101" value="Stage 8:&amp;nbsp;&lt;strong style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;Getting Private Key of NFS Server to Connect&lt;/strong&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;:&lt;/span&gt;&lt;ul&gt;&lt;li&gt;This step copies the private SSH key from the NFS server to the Jenkins workspace, allowing Jenkins to securely connect to the NFS server.&lt;/li&gt;&lt;/ul&gt;" style="rounded=0;whiteSpace=wrap;html=1;align=left;strokeColor=#FF3333;" vertex="1" parent="1"><mxGeometry x="105" y="2840" width="720" height="100" as="geometry"/></mxCell><mxCell id="102" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.25;exitDx=0;exitDy=0;entryX=0;entryY=0.25;entryDx=0;entryDy=0;strokeColor=#FF3333;" edge="1" source="106" target="111" parent="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="103" value="Authentication Request&lt;div&gt;&lt;span data-teams=&quot;true&quot;&gt;['Jenkins_Tomcat_SSH_Credentials']&lt;/span&gt;&lt;/div&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];strokeColor=#FF3333;" vertex="1" connectable="0" parent="102"><mxGeometry x="-0.0725" y="-2" relative="1" as="geometry"><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="104" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.75;exitDx=0;exitDy=0;entryX=0;entryY=0.75;entryDx=0;entryDy=0;strokeColor=#FF3333;" edge="1" source="106" target="111" parent="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="105" value="Copying Private key&lt;div&gt;in&amp;nbsp;&lt;span style=&quot;background-color: rgb(251, 251, 251); font-size: 12px; text-align: left; text-wrap: wrap; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;/var/lib/jenkins/.ssh/id_rsa_NFS&lt;/span&gt;&lt;/div&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];strokeColor=#FF3333;" vertex="1" connectable="0" parent="104"><mxGeometry x="-0.0203" y="-2" relative="1" as="geometry"><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="106" value="NFS Server" style="whiteSpace=wrap;html=1;aspect=fixed;strokeColor=#FF3333;" vertex="1" parent="1"><mxGeometry x="20" y="2950" width="120" height="120" as="geometry"/></mxCell><mxCell id="107" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;strokeColor=#FF3333;" edge="1" source="111" target="106" parent="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="108" value="Connection Established" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];strokeColor=#FF3333;" vertex="1" connectable="0" parent="107"><mxGeometry x="0.0029" relative="1" as="geometry"><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="109" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=1;exitDx=0;exitDy=0;entryX=1;entryY=1;entryDx=0;entryDy=0;strokeColor=#FF3333;" edge="1" source="111" target="106" parent="1"><mxGeometry relative="1" as="geometry"><Array as="points"><mxPoint x="215" y="3070"/><mxPoint x="215" y="3070"/></Array></mxGeometry></mxCell><mxCell id="110" value="Success" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];strokeColor=#FF3333;" vertex="1" connectable="0" parent="109"><mxGeometry x="0.0151" y="-1" relative="1" as="geometry"><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="111" value="Jenkins Server" style="whiteSpace=wrap;html=1;aspect=fixed;strokeColor=#FF3333;" vertex="1" parent="1"><mxGeometry x="370" y="2950" width="120" height="120" as="geometry"/></mxCell><mxCell id="112" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#FF3333;" edge="1" source="113" target="111" parent="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="113" value="&lt;div style=&quot;text-align: left;&quot;&gt;&lt;span data-teams=&quot;true&quot;&gt;sshpass -p '${NFS_PASSWORD}' scp -o StrictHostKeyChecking=no root@192.168.1.114:/root/.ssh/id_rsa /var/lib/jenkins/.ssh/id_rsa_NFS&lt;/span&gt;&lt;br&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#FF3333;" vertex="1" parent="1"><mxGeometry x="580" y="2975" width="290" height="70" as="geometry"/></mxCell><mxCell id="114" value="Stage 9:&amp;nbsp;&lt;strong style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;Getting Private Key of K8S Master Server to Connect&lt;/strong&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;:&lt;/span&gt;&lt;ul&gt;&lt;li&gt;Similar to the previous stage, but this time the private key for the Kubernetes master server is copied to Jenkins for secure access.&lt;/li&gt;&lt;/ul&gt;" style="rounded=0;whiteSpace=wrap;html=1;align=left;strokeColor=#FF3333;" vertex="1" parent="1"><mxGeometry x="105" y="3100" width="720" height="100" as="geometry"/></mxCell><mxCell id="115" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.25;exitDx=0;exitDy=0;entryX=0;entryY=0.25;entryDx=0;entryDy=0;strokeColor=#FF3333;" edge="1" source="119" target="124" parent="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="116" value="Authentication Request&lt;div&gt;&lt;span data-teams=&quot;true&quot;&gt;['Jenkins_Tomcat_SSH_Credentials']&lt;/span&gt;&lt;/div&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];strokeColor=#FF3333;" vertex="1" connectable="0" parent="115"><mxGeometry x="-0.0725" y="-2" relative="1" as="geometry"><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="117" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.75;exitDx=0;exitDy=0;entryX=0;entryY=0.75;entryDx=0;entryDy=0;strokeColor=#FF3333;" edge="1" source="119" target="124" parent="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="118" value="Copying Private key&lt;div&gt;in&amp;nbsp;&lt;span style=&quot;background-color: rgb(251, 251, 251); font-size: 12px; text-align: left; text-wrap: wrap; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;/var/lib/jenkins/.ssh/id_rsa_K8S&lt;/span&gt;&lt;/div&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];strokeColor=#FF3333;" vertex="1" connectable="0" parent="117"><mxGeometry x="-0.0203" y="-2" relative="1" as="geometry"><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="119" value="NFS Server" style="whiteSpace=wrap;html=1;aspect=fixed;strokeColor=#FF3333;" vertex="1" parent="1"><mxGeometry x="20" y="3210" width="120" height="120" as="geometry"/></mxCell><mxCell id="120" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;strokeColor=#FF3333;" edge="1" source="124" target="119" parent="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="121" value="Connection Established" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];strokeColor=#FF3333;" vertex="1" connectable="0" parent="120"><mxGeometry x="0.0029" relative="1" as="geometry"><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="122" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=1;exitDx=0;exitDy=0;entryX=1;entryY=1;entryDx=0;entryDy=0;strokeColor=#FF3333;" edge="1" source="124" target="119" parent="1"><mxGeometry relative="1" as="geometry"><Array as="points"><mxPoint x="215" y="3330"/><mxPoint x="215" y="3330"/></Array></mxGeometry></mxCell><mxCell id="123" value="Success" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];strokeColor=#FF3333;" vertex="1" connectable="0" parent="122"><mxGeometry x="0.0151" y="-1" relative="1" as="geometry"><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="124" value="Jenkins Server" style="whiteSpace=wrap;html=1;aspect=fixed;strokeColor=#FF3333;" vertex="1" parent="1"><mxGeometry x="370" y="3210" width="120" height="120" as="geometry"/></mxCell><mxCell id="125" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#FF3333;" edge="1" source="126" target="124" parent="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="126" value="&lt;div style=&quot;text-align: left;&quot;&gt;&lt;span data-teams=&quot;true&quot;&gt;sshpass -p '${K8S_PASSWORD}' scp -o StrictHostKeyChecking=no root@192.168.1.100:/root/.ssh/id_rsa /var/lib/jenkins/.ssh/id_rsa_K8S&lt;/span&gt;&lt;br&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#FF3333;" vertex="1" parent="1"><mxGeometry x="580" y="3235" width="290" height="70" as="geometry"/></mxCell><mxCell id="127" value="Stage 10:&amp;nbsp;&lt;strong style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;Creating Exports File in NFS Server to Consider Directory as Persistent Volume&lt;/strong&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;:&lt;/span&gt;&lt;ul&gt;&lt;li&gt;The script connects to the NFS server and configures the &lt;code&gt;/etc/exports&lt;/code&gt; file to share the directory (&lt;code&gt;/customVolume&lt;/code&gt;). It also restarts the NFS service to apply the changes.&lt;/li&gt;&lt;/ul&gt;" style="rounded=0;whiteSpace=wrap;html=1;align=left;strokeColor=#FF3333;" vertex="1" parent="1"><mxGeometry x="105" y="3350" width="720" height="100" as="geometry"/></mxCell><mxCell id="128" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.25;exitDx=0;exitDy=0;entryX=0;entryY=0.25;entryDx=0;entryDy=0;strokeColor=#FF3333;" edge="1" source="132" target="137" parent="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="129" value="Authentication Request&lt;div&gt;&lt;span data-teams=&quot;true&quot;&gt;['Jenkins_Tomcat_SSH_Credentials']&lt;/span&gt;&lt;/div&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];strokeColor=#FF3333;" vertex="1" connectable="0" parent="128"><mxGeometry x="-0.0725" y="-2" relative="1" as="geometry"><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="130" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.75;exitDx=0;exitDy=0;entryX=0;entryY=0.75;entryDx=0;entryDy=0;strokeColor=#FF3333;" edge="1" source="132" target="137" parent="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="131" value="Creating DIR and&lt;div&gt;Configuring /etc/exports file&lt;/div&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];strokeColor=#FF3333;" vertex="1" connectable="0" parent="130"><mxGeometry x="-0.0203" y="-2" relative="1" as="geometry"><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="132" value="Jenkins Server" style="whiteSpace=wrap;html=1;aspect=fixed;strokeColor=#FF3333;" vertex="1" parent="1"><mxGeometry x="20" y="3460" width="120" height="120" as="geometry"/></mxCell><mxCell id="133" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;strokeColor=#FF3333;" edge="1" source="137" target="132" parent="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="134" value="Connection Established" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];strokeColor=#FF3333;" vertex="1" connectable="0" parent="133"><mxGeometry x="0.0029" relative="1" as="geometry"><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="135" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=1;exitDx=0;exitDy=0;entryX=1;entryY=1;entryDx=0;entryDy=0;strokeColor=#FF3333;" edge="1" source="137" target="132" parent="1"><mxGeometry relative="1" as="geometry"><Array as="points"><mxPoint x="215" y="3580"/><mxPoint x="215" y="3580"/></Array></mxGeometry></mxCell><mxCell id="136" value="Success" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];strokeColor=#FF3333;" vertex="1" connectable="0" parent="135"><mxGeometry x="0.0151" y="-1" relative="1" as="geometry"><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="137" value="NFS Server" style="whiteSpace=wrap;html=1;aspect=fixed;strokeColor=#FF3333;" vertex="1" parent="1"><mxGeometry x="370" y="3460" width="120" height="120" as="geometry"/></mxCell><mxCell id="138" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#FF3333;" edge="1" source="139" target="137" parent="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="139" value="&lt;div style=&quot;text-align: left;&quot;&gt;ssh -o StrictHostKeyChecking=no -i ${SSH_KEY_NFS} ${NFS_USER}@${NFS_SERVER} '&lt;br&gt;mkdir -p ${EXPORT_DIR} &amp;amp;&amp;amp;&amp;nbsp;&lt;br&gt;echo &quot;${EXPORT_DIR} *(rw,sync,no_subtree_check,no_root_squash)&quot; &amp;gt; /etc/exports &amp;amp;&amp;amp;&lt;br&gt;systemctl restart nfs-server.service&lt;br&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#FF3333;" vertex="1" parent="1"><mxGeometry x="590" y="3453.75" width="290" height="132.5" as="geometry"/></mxCell><mxCell id="140" value="Stage 11:&amp;nbsp;&lt;strong style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;Transfer All Files to K8S Server&lt;/strong&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;:&lt;/span&gt;&lt;ul&gt;&lt;li&gt;This stage uses &lt;code&gt;scp&lt;/code&gt; to transfer all files from the Jenkins workspace to the Kubernetes server. The files are copied to the home directory of the &lt;code&gt;vagrant&lt;/code&gt; user.&lt;/li&gt;&lt;/ul&gt;" style="rounded=0;whiteSpace=wrap;html=1;align=left;strokeColor=#FF3333;" vertex="1" parent="1"><mxGeometry x="105" y="3600" width="720" height="100" as="geometry"/></mxCell><mxCell id="141" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.25;exitDx=0;exitDy=0;entryX=0;entryY=0.25;entryDx=0;entryDy=0;strokeColor=#FF3333;" edge="1" source="145" target="150" parent="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="142" value="Authentication Request&lt;div&gt;&lt;span data-teams=&quot;true&quot;&gt;['Jenkins_Tomcat_SSH_Credentials']&lt;/span&gt;&lt;/div&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];strokeColor=#FF3333;" vertex="1" connectable="0" parent="141"><mxGeometry x="-0.0725" y="-2" relative="1" as="geometry"><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="143" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.75;exitDx=0;exitDy=0;entryX=0;entryY=0.75;entryDx=0;entryDy=0;strokeColor=#FF3333;" edge="1" source="145" target="150" parent="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="144" value="Copying ${workspacePath} files&lt;div&gt;to /home/vagrant&lt;/div&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];strokeColor=#FF3333;" vertex="1" connectable="0" parent="143"><mxGeometry x="-0.0203" y="-2" relative="1" as="geometry"><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="145" value="Jenkins Server" style="whiteSpace=wrap;html=1;aspect=fixed;strokeColor=#FF3333;" vertex="1" parent="1"><mxGeometry x="20" y="3723.75" width="120" height="120" as="geometry"/></mxCell><mxCell id="146" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;strokeColor=#FF3333;" edge="1" source="150" target="145" parent="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="147" value="Connection Established" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];strokeColor=#FF3333;" vertex="1" connectable="0" parent="146"><mxGeometry x="0.0029" relative="1" as="geometry"><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="148" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=1;exitDx=0;exitDy=0;entryX=1;entryY=1;entryDx=0;entryDy=0;strokeColor=#FF3333;" edge="1" source="150" target="145" parent="1"><mxGeometry relative="1" as="geometry"><Array as="points"><mxPoint x="215" y="3843.75"/><mxPoint x="215" y="3843.75"/></Array></mxGeometry></mxCell><mxCell id="149" value="Success" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];strokeColor=#FF3333;" vertex="1" connectable="0" parent="148"><mxGeometry x="0.0151" y="-1" relative="1" as="geometry"><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="150" value="K8S Master Server&lt;div&gt;User: vagrant&lt;/div&gt;" style="whiteSpace=wrap;html=1;aspect=fixed;strokeColor=#FF3333;" vertex="1" parent="1"><mxGeometry x="370" y="3723.75" width="120" height="120" as="geometry"/></mxCell><mxCell id="151" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#FF3333;" edge="1" source="152" target="150" parent="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="152" value="&lt;div style=&quot;text-align: left;&quot;&gt;&lt;span data-teams=&quot;true&quot;&gt;scp -r -i $SSH_KEY_K8S $workspacePath/* vagrant@$K8S_SERVER:/home/vagrant/&lt;/span&gt;&lt;br&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#FF3333;" vertex="1" parent="1"><mxGeometry x="590" y="3757.5" width="290" height="52.5" as="geometry"/></mxCell><mxCell id="153" value="Stage 12:&amp;nbsp;&lt;strong style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;Apply YAML Files on K8S Server&lt;/strong&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;:&lt;/span&gt;&lt;ul&gt;&lt;li&gt;This stage applies all the Kubernetes YAML configuration files present in the &lt;code&gt;vagrant&lt;/code&gt; home directory to the Kubernetes cluster using &lt;code&gt;kubectl&lt;/code&gt;.&lt;/li&gt;&lt;/ul&gt;" style="rounded=0;whiteSpace=wrap;html=1;align=left;strokeColor=#FF3333;" vertex="1" parent="1"><mxGeometry x="105" y="3860" width="720" height="100" as="geometry"/></mxCell><mxCell id="154" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.25;exitDx=0;exitDy=0;entryX=0;entryY=0.25;entryDx=0;entryDy=0;strokeColor=#FF3333;" edge="1" source="158" target="163" parent="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="155" value="Authentication Request&lt;div&gt;&lt;span data-teams=&quot;true&quot;&gt;['Jenkins_Tomcat_SSH_Credentials']&lt;/span&gt;&lt;/div&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];strokeColor=#FF3333;" vertex="1" connectable="0" parent="154"><mxGeometry x="-0.0725" y="-2" relative="1" as="geometry"><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="156" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.75;exitDx=0;exitDy=0;entryX=0;entryY=0.75;entryDx=0;entryDy=0;strokeColor=#FF3333;" edge="1" source="158" target="163" parent="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="157" value="Applying YAML files&amp;nbsp;&lt;div&gt;in /home/vagrant/*.yaml&lt;/div&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];strokeColor=#FF3333;" vertex="1" connectable="0" parent="156"><mxGeometry x="-0.0203" y="-2" relative="1" as="geometry"><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="158" value="Jenkins Server" style="whiteSpace=wrap;html=1;aspect=fixed;strokeColor=#FF3333;" vertex="1" parent="1"><mxGeometry x="20" y="3970" width="120" height="120" as="geometry"/></mxCell><mxCell id="159" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;strokeColor=#FF3333;" edge="1" source="163" target="158" parent="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="160" value="Connection Established" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];strokeColor=#FF3333;" vertex="1" connectable="0" parent="159"><mxGeometry x="0.0029" relative="1" as="geometry"><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="161" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=1;exitDx=0;exitDy=0;entryX=1;entryY=1;entryDx=0;entryDy=0;strokeColor=#FF3333;" edge="1" source="163" target="158" parent="1"><mxGeometry relative="1" as="geometry"><Array as="points"><mxPoint x="215" y="4090"/><mxPoint x="215" y="4090"/></Array></mxGeometry></mxCell><mxCell id="162" value="Success" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];strokeColor=#FF3333;" vertex="1" connectable="0" parent="161"><mxGeometry x="0.0151" y="-1" relative="1" as="geometry"><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="163" value="K8S Master Server&lt;div&gt;User: vagrant&lt;/div&gt;" style="whiteSpace=wrap;html=1;aspect=fixed;strokeColor=#FF3333;" vertex="1" parent="1"><mxGeometry x="370" y="3970" width="120" height="120" as="geometry"/></mxCell><mxCell id="164" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#FF3333;" edge="1" source="165" target="163" parent="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="165" value="&lt;div style=&quot;text-align: left;&quot;&gt;ssh -i $SSH_KEY_K8S vagrant@$K8S_SERVER '&lt;br&gt;for file in /home/vagrant/*.yaml; do&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;kubectl apply -f &quot;$file&quot;&lt;br&gt;done&lt;br&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#FF3333;" vertex="1" parent="1"><mxGeometry x="590" y="3996.88" width="290" height="66.25" as="geometry"/></mxCell><mxCell id="166" value="Stage 13:&amp;nbsp;&lt;strong style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;Get NodePort&lt;/strong&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;:&lt;/span&gt;&lt;ul&gt;&lt;li&gt;This stage queries the Kubernetes service for the assigned NodePort for a specific service (&lt;code&gt;mavenwebappsvc&lt;/code&gt;) and prints it to the Jenkins console log.&lt;/li&gt;&lt;/ul&gt;" style="rounded=0;whiteSpace=wrap;html=1;align=left;strokeColor=#FF3333;" vertex="1" parent="1"><mxGeometry x="105" y="4110" width="720" height="100" as="geometry"/></mxCell><mxCell id="167" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.25;exitDx=0;exitDy=0;entryX=0;entryY=0.25;entryDx=0;entryDy=0;strokeColor=#FF3333;" edge="1" source="171" target="176" parent="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="168" value="Authentication Request&lt;div&gt;&lt;span data-teams=&quot;true&quot;&gt;['Jenkins_Tomcat_SSH_Credentials']&lt;/span&gt;&lt;/div&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];strokeColor=#FF3333;" vertex="1" connectable="0" parent="167"><mxGeometry x="-0.0725" y="-2" relative="1" as="geometry"><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="169" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=1;exitDx=0;exitDy=0;entryX=0;entryY=1;entryDx=0;entryDy=0;strokeColor=#FF3333;" edge="1" source="171" target="176" parent="1"><mxGeometry relative="1" as="geometry"><Array as="points"><mxPoint x="260" y="4350"/><mxPoint x="260" y="4350"/></Array></mxGeometry></mxCell><mxCell id="170" value="Success" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];strokeColor=#FF3333;" vertex="1" connectable="0" parent="169"><mxGeometry x="0.0087" y="-2" relative="1" as="geometry"><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="171" value="Jenkins Server" style="whiteSpace=wrap;html=1;aspect=fixed;strokeColor=#FF3333;" vertex="1" parent="1"><mxGeometry x="20" y="4230" width="120" height="120" as="geometry"/></mxCell><mxCell id="172" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;strokeColor=#FF3333;" edge="1" source="176" target="171" parent="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="173" value="Connection Established" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];strokeColor=#FF3333;" vertex="1" connectable="0" parent="172"><mxGeometry x="0.0029" relative="1" as="geometry"><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="174" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.75;exitDx=0;exitDy=0;entryX=1;entryY=0.75;entryDx=0;entryDy=0;strokeColor=#FF3333;" edge="1" source="176" target="171" parent="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="175" value="Getting the NodePort of the&lt;div&gt;Application service&lt;/div&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];strokeColor=#FF3333;" vertex="1" connectable="0" parent="174"><mxGeometry x="-0.0435" y="2" relative="1" as="geometry"><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="176" value="K8S Master Server&lt;div&gt;User: vagrant&lt;/div&gt;" style="whiteSpace=wrap;html=1;aspect=fixed;strokeColor=#FF3333;" vertex="1" parent="1"><mxGeometry x="370" y="4230" width="120" height="120" as="geometry"/></mxCell><mxCell id="177" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#FF3333;" edge="1" source="178" target="176" parent="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="178" value="&lt;div style=&quot;text-align: left;&quot;&gt;&lt;p&gt;def serviceName = &quot;mavenwebappsvc&quot;&lt;br&gt;def namespace = &quot;custom&quot;&lt;/p&gt;&lt;p&gt;def nodePort = sh(script: &quot;&quot;&quot;&lt;br&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp;ssh -o StrictHostKeyChecking=no -i ${SSH_KEY_K8S} vagrant@${K8S_SERVER} &quot;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; kubectl get svc ${serviceName} -n ${namespace} -o=jsonpath='{.spec.ports[0].nodePort}'&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;&lt;br&gt;&quot;&quot;&quot;, returnStdout: true).trim()&lt;/p&gt;&lt;p&gt;echo &quot;NodePort assigned to ${serviceName}: ${nodePort}&quot;&lt;/p&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#FF3333;" vertex="1" parent="1"><mxGeometry x="610" y="4213.4400000000005" width="530" height="153.12" as="geometry"/></mxCell><mxCell id="179" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;strokeColor=#FF3333;" edge="1" source="181" parent="1"><mxGeometry relative="1" as="geometry"><mxPoint x="690" y="4550" as="targetPoint"/></mxGeometry></mxCell><mxCell id="180" value="10. Create a DIR and configure the NFS Server Volume&amp;nbsp;&lt;div&gt;to create persistent volumes&lt;/div&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];strokeColor=#FF3333;" vertex="1" connectable="0" parent="179"><mxGeometry x="-0.1135" y="2" relative="1" as="geometry"><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="181" value="Jenkins Server" style="whiteSpace=wrap;html=1;aspect=fixed;strokeColor=#FF3333;" vertex="1" parent="1"><mxGeometry x="210" y="4500" width="110" height="110" as="geometry"/></mxCell><mxCell id="182" value="NFS Server" style="whiteSpace=wrap;html=1;aspect=fixed;strokeColor=#FF3333;" vertex="1" parent="1"><mxGeometry x="700" y="4440" width="110" height="110" as="geometry"/></mxCell><mxCell id="183" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;strokeColor=#FF3333;" edge="1" source="187" target="189" parent="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="184" value="6. Copying Generated SSH files&lt;div&gt;from ~/.ssh&lt;/div&gt;&lt;div&gt;to ~/home/vagrant/.ssh&lt;/div&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];strokeColor=#FF3333;" vertex="1" connectable="0" parent="183"><mxGeometry x="0.3474" y="2" relative="1" as="geometry"><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="185" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.25;exitDx=0;exitDy=0;entryX=0.75;entryY=1;entryDx=0;entryDy=0;strokeColor=#FF3333;" edge="1" source="187" target="181" parent="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="186" value="9. Update K8S Server Private to Jenkins Server&lt;div&gt;in /var/lib/jenkins/.ssh/id_rsa_K8S&lt;/div&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];strokeColor=#FF3333;" vertex="1" connectable="0" parent="185"><mxGeometry x="0.2116" y="-3" relative="1" as="geometry"><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="187" value="K8S Server&lt;div&gt;User: root&lt;/div&gt;" style="whiteSpace=wrap;html=1;aspect=fixed;strokeColor=#FF3333;" vertex="1" parent="1"><mxGeometry x="700" y="4600" width="110" height="110" as="geometry"/></mxCell><mxCell id="188" value="13. Push Created Application Service NodePort&amp;nbsp;&lt;div&gt;to Jenkins Server&amp;nbsp;&lt;/div&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];strokeColor=#FF3333;" vertex="1" connectable="0" parent="1"><mxGeometry x="159.5" y="4894" as="geometry"/></mxCell><mxCell id="189" value="K8S Server&lt;div&gt;User: vagrant&lt;/div&gt;" style="whiteSpace=wrap;html=1;aspect=fixed;strokeColor=#FF3333;" vertex="1" parent="1"><mxGeometry x="465" y="4760" width="110" height="110" as="geometry"/></mxCell><mxCell id="190" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.25;exitY=0;exitDx=0;exitDy=0;entryX=-0.018;entryY=0.082;entryDx=0;entryDy=0;entryPerimeter=0;strokeColor=#FF3333;" edge="1" source="181" target="182" parent="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="191" value="2. Need to update Jenkins Public Key in NFS Server to access from Jenkins server" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];strokeColor=#FF3333;" vertex="1" connectable="0" parent="190"><mxGeometry x="0.1611" y="1" relative="1" as="geometry"><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="192" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;strokeColor=#FF3333;" edge="1" target="181" parent="1"><mxGeometry relative="1" as="geometry"><mxPoint x="70" y="4610" as="sourcePoint"/></mxGeometry></mxCell><mxCell id="193" value="1. Cloning Code" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];strokeColor=#FF3333;" vertex="1" connectable="0" parent="192"><mxGeometry x="0.0564" y="2" relative="1" as="geometry"><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="194" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.25;exitY=1;exitDx=0;exitDy=0;entryX=-0.018;entryY=0.918;entryDx=0;entryDy=0;entryPerimeter=0;strokeColor=#FF3333;" edge="1" source="181" target="187" parent="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="195" value="3. Need to update Jenkins Public key in K8S server&amp;nbsp;&lt;div&gt;to access from Jenkins Server&lt;/div&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];strokeColor=#FF3333;" vertex="1" connectable="0" parent="194"><mxGeometry x="0.0111" y="-1" relative="1" as="geometry"><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="196" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.006;entryY=0.361;entryDx=0;entryDy=0;entryPerimeter=0;strokeColor=#FF3333;" edge="1" source="181" target="182" parent="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="197" value="4. Generating SSH keys and configuring Jenkins Pub Key&amp;nbsp;&lt;div&gt;in both generated public key and authorized_keys&amp;nbsp;&lt;span style=&quot;background-color: light-dark(#ffffff, var(--ge-dark-color, #121212)); color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;of NFS server&lt;/span&gt;&lt;/div&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];strokeColor=#FF3333;" vertex="1" connectable="0" parent="196"><mxGeometry x="-0.0205" y="1" relative="1" as="geometry"><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="198" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=-0.006;entryY=0.615;entryDx=0;entryDy=0;entryPerimeter=0;strokeColor=#FF3333;" edge="1" source="181" target="187" parent="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="199" value="5. Generating SSH keys and configuring Jenkins Pub Key&amp;nbsp;&lt;div&gt;in both generated public key and authorized_keys&amp;nbsp;&lt;span style=&quot;background-color: light-dark(#ffffff, var(--ge-dark-color, #121212)); color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;of K8S Server&lt;/span&gt;&lt;/div&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];strokeColor=#FF3333;" vertex="1" connectable="0" parent="198"><mxGeometry x="0.0353" y="3" relative="1" as="geometry"><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="200" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.75;exitDx=0;exitDy=0;entryX=-0.009;entryY=0.664;entryDx=0;entryDy=0;entryPerimeter=0;strokeColor=#FF3333;" edge="1" source="181" target="189" parent="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="201" value="7. Test Connection" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];strokeColor=#FF3333;" vertex="1" connectable="0" parent="200"><mxGeometry x="0.449" y="1" relative="1" as="geometry"><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="202" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.75;exitDx=0;exitDy=0;entryX=0.982;entryY=0.197;entryDx=0;entryDy=0;entryPerimeter=0;strokeColor=#FF3333;" edge="1" source="182" target="181" parent="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="203" value="8. Update NFS Server private key to Jenkins Server&amp;nbsp;&lt;div&gt;in /var/lib/jenkins/.ssh/id_rsa_NFS&lt;/div&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];strokeColor=#FF3333;" vertex="1" connectable="0" parent="202"><mxGeometry x="0.0701" y="2" relative="1" as="geometry"><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="204" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=1;exitDx=0;exitDy=0;entryX=0.009;entryY=0.318;entryDx=0;entryDy=0;entryPerimeter=0;strokeColor=#FF3333;" edge="1" source="181" target="189" parent="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="205" value="11. Copy all cloned files from GitHub Repo&lt;div&gt;to K8S Server ~/home/vagrant/&lt;/div&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];strokeColor=#FF3333;" vertex="1" connectable="0" parent="204"><mxGeometry x="0.4241" y="-2" relative="1" as="geometry"><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="206" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0;exitDx=0;exitDy=0;entryX=1.003;entryY=0.924;entryDx=0;entryDy=0;entryPerimeter=0;strokeColor=#FF3333;" edge="1" source="181" target="189" parent="1"><mxGeometry relative="1" as="geometry"><Array as="points"><mxPoint x="210" y="4420"/><mxPoint x="850" y="4420"/><mxPoint x="850" y="4862"/></Array></mxGeometry></mxCell><mxCell id="207" value="12. Apply all the copied YAML files using Kubectl" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];strokeColor=#FF3333;" vertex="1" connectable="0" parent="206"><mxGeometry x="-0.4138" y="2" relative="1" as="geometry"><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="208" value="Text" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;strokeColor=#FF3333;" vertex="1" parent="1"><mxGeometry x="430" y="3460" width="60" height="30" as="geometry"/></mxCell></root></mxGraphModel>
